<div layout>

    <h3>Cloud node mappings for pool {{ model.poolId }}</h3>
    <span>This section will only show nodes with discrepancy between DB and Cloud provider. If there are none - none will be shown.</span><br>
    <button ng-click="getCloudNodes(model.poolId)">refresh</button>

    <table>
        <thead>
            <tr>
                <th>Node ID</th>
                <th>Machine ID</th>
                <th>Machine IP</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody ng-show="model.poolCloudNodes">
            <tr ng-repeat="cloudNode in model.poolCloudNodes track by cloudNode.machineId" ng-show="cloudNode.nodeId === -1 || cloudNode.ip === null">
                <!-- Show only 'problematic' nodes -->
                <td>{{ cloudNode.nodeId }}</td>
                <td>{{ cloudNode.machineId }}</td>
                <td><pre>{{ cloudNode.ip | json }}</pre></td>
                <td>
                    <button ng-click="deleteCloudNode(model.poolId, cloudNode)">Delete</button>
                </td>
            </tr>
        </tbody>
        <tbody ng-show="model.poolCloudNodes === 0">
            <tr>
                <td colspan="4">Loading...</td>
            </tr>
        </tbody>
    </table>
</div>
